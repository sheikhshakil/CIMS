<% if (user.userType === "admin") { %> <%- include ("../partials/header.ejs") %>

<section class="container">
  <!-- users creation -->
  <div class="shadow mb-3">
    <div class="card-header p-3 light-bg">
      <b>Create user</b>
    </div>
    <div class="card-body p-3">
      <form action="/createUser" method="post">
        <div class="row">
          <div class="col-md-3">
            <!-- 1 -->
            <div class="mb-3">
              <select required name="userType" class="form-select">
                <option value="null">Choose user type -</option>
                <option value="purchasing">Purchasing person</option>
                <option value="processing">Processing person</option>
                <option value="sales">Sales person</option>
                <option value="admin">Admin</option>
              </select>
            </div>
          </div>
          <div class="col-md-3">
            <!-- 2 -->
            <div class="mb-3">
              <input
                required
                type="text"
                class="form-control"
                name="name"
                placeholder="Full name of user"
              />
            </div>
          </div>
          <div class="col-md-3">
            <div class="mb-3">
              <input
                required
                type="text"
                class="form-control"
                name="username"
                placeholder="An unique username"
              />
            </div>
          </div>
          <div class="col-md-3">
            <div class="mb-3">
              <input
                required
                type="password"
                class="form-control"
                name="password"
                placeholder="A password"
              />
            </div>
          </div>
        </div>
        <div class="text-center">
          <button class="btn btn-dark">Create</button>
        </div>
      </form>
    </div>
  </div>

  <!-- users list -->
  <div id="ulist" class="shadow mb-3">
    <div class="card-header p-3 light-bg-blue">
      <b>Your users list</b>
    </div>
    <div class="table-responsive p-3">
      <table class="table table-bordered table-hover table-striped my-0">
        <thead class="table-dark">
          <tr>
            <th>User type</th>
            <th>Full name</th>
            <th>Username</th>
            <th>Password</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% allUser.forEach(u => { %>
          <tr>
            <td><%= u.userType %></td>
            <td><%= u.name %></td>
            <td><%= u.username %></td>
            <td><%= u.password %></td>
            <td>
              <a
                class="
                  btn btn-danger btn-sm
                  <%=
                  u.username
                  ===
                  'admin'
                  ?
                  'disabled'
                  :
                  ''
                  %>
                "
                href="/deleteUser?username=<%= u.username %>"
                >Delete user</a
              >
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</section>

<%- include ("../partials/footer.ejs") %> <% } %>
